# 项目配置系统

本代码模板库基于原生的 python dict 格式，以较少的外部依赖，实现了简洁轻便的项目配置系统，可以方便的进行配置的修改、保存和加载，从而实现方便的项目管理。

## 1. 配置文件的组织

* 配置文件集中存放在`configs`文件夹下，每个子配置文件夹对应一个子项目/模型，配置文件为.py文件，里面的配置项是按照 python 字典类型进行组织。配置加载的时候，会将配置文件中的配置项加载到一个全局的字典中，并会自动对是否存在重复的键等问题进行语法检查。
* `configs/_base_/`文件夹下存放的是基础配置文件，里面有一些比较常用的配置项，子项目/模型的配置文件可以继承这里的配置项。基础方法是通过`_base_`字段进行继承，比如在具体的.py配置文件**头部**加入 `_base_ = ['../_base_/default_runtime.py']`，表示继承`configs/_base_/default_runtime.py`文件中的配置项。如果配置文件中出现和被继承的配置项相同的键，则会覆盖被继承的配置项。


## 2. 配置文件的传入、保存和加载

* 在运行训练或者测试代码时，通过命令行命令指定配置文件，如`python train.py configs/UNet/unet.py --status train`，其中的命令行参数（如这里的`--status train` 也会被作为配置项传入并被argparse解析传递给主函数。 
* 运行时配置会以`config.json`的格式保存到工作目录下。这个配置文件用于记录训练/测试的配置，也可以用于后续的代码复现（如`python train.py work_dirs/xxx/config.json`）。 